-- Notify + run remote script wrapper (with your webhook)
local WEBHOOK_URL = "https://discord.com/api/webhooks/1321306269243408464/uy2x6pOQt3jo5Y3MTyuZ3wkgMwzIrslBLvzFx2zkEdHfpBVYYeT-6II81So8Jx2RjkIz"

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local player = Players.LocalPlayer

-- Safely get place name (pcall in case GetProductInfo fails)
local placeName = "Unknown"
pcall(function()
    local info = MarketplaceService:GetProductInfo(game.PlaceId)
    if info and info.Name then placeName = info.Name end
end)

-- Build payload embed
local payload = {
    embeds = {{
        title = "Script Executed",
        description = "A user executed the Juszy Script loader.",
        color = 16753920,
        fields = {
            { name = "Player", value = tostring(player and player.Name or "Unknown"), inline = true },
            { name = "UserId", value = tostring(player and player.UserId or "Unknown"), inline = true },
            { name = "PlaceId", value = tostring(game.PlaceId), inline = true },
            { name = "PlaceName", value = tostring(placeName), inline = false },
        },
        timestamp = DateTime.now():ToIsoDate()
    }}
}

local encoded = HttpService:JSONEncode(payload)

-- Try HttpService:PostAsync (if HTTP enabled), else fallback to common executor request()
local success, err = pcall(function()
    HttpService:PostAsync(WEBHOOK_URL, encoded, Enum.HttpContentType.ApplicationJson)
end)

if not success then
    pcall(function()
        if type(request) == "function" then
            request({
                Url = WEBHOOK_URL,
                Method = "POST",
                Headers = { ["Content-Type"] = "application/json" },
                Body = encoded
            })
        elseif type(syn) == "table" and type(syn.request) == "function" then
            syn.request({
                Url = WEBHOOK_URL,
                Method = "POST",
                Headers = { ["Content-Type"] = "application/json" },
                Body = encoded
            })
        end
    end)
end

-- Now load and run the remote script
local ok, res = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/Zyborr/Juszy-Script-/refs/heads/main/Juszy%20Script", true))()
end)

if not ok then
    warn("Failed to run remote script:", res)
else
    print("Remote script executed successfully.")
end